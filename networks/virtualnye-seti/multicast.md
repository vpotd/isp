# Multicast

**Multicast** \(англ. _групповая передача_\) — специальная форма широковещания, при которой сетевой пакет одновременно направляется определённому подмножеству адресатов — не одному \(unicast\), и не всем \(broadcast\).

**Схема групповой передачи.**

![](../../.gitbook/assets/1.png)

**Групповая передача \(сверху\) в сравнении с однонаправленной передачей. Оранжевыми кругами показаны конечные точки, зелеными — точки маршрутизации.**

![](../../.gitbook/assets/2%20%281%29.png)

Наряду с приложениями, устанавливающими связь между источником и одним получателем, существуют такие, где требуется, чтобы источник посылал информацию сразу группе получателей. В качестве таких приложений можно упомянуть дистанционное обучение, рассылку корпоративной информации, репликацию баз данных и информации веб-сайтов и многое другое. При традиционной технологии IP-адресации требуется каждому получателю информации послать свой пакет данных, то есть одна и та же информация передается много раз. Технология групповой адресации представляет собой расширение IP-адресации, позволяющее направить одну копию пакета сразу всем получателям. Множество получателей определяется принадлежностью каждого из них к конкретной группе. Рассылку для конкретной группы получают только члены этой группы.

Технология IP Multicast предоставляет ряд существенных преимуществ по сравнению с традиционным подходом. Например, добавление новых пользователей не влечет за собой необходимое увеличение пропускной способности сети. Значительно сокращается нагрузка на посылающий сервер, который больше не должен поддерживать множество двухсторонних соединений. Использование групповой адресации позволяет обеспечить доступ корпоративных пользователей к данным и сервисам, ранее недоступным, так как для их реализации с помощью обычной адресации потребовались бы значительные сетевые ресурсы.

В последнее время широкое распространение приобрели мультимедиа трансляции и видеоконференцсвязь. При использовании традиционной технологии пропускной способности существующих каналов хватает лишь для установления связи с очень ограниченным числом получателей. Групповая адресация снимает это ограничение и получателей может быть любое количество.

В настоящее время IP Multicast является широко поддерживаемым сетевым стандартом. Все современное сетевое программное обеспечение и аппаратное оборудование поддерживает этот стандарт. Для использования групповой IP-адресации необходима ее поддержка локальной сетью. Что касается глобальной сети, в некоторых случаях допустимо использование «туннелирования» для преодоления участков, эту адресацию не поддерживающих.

Для реализации групповой адресации в локальной сети необходимы: поддержка групповой адресации стеком протокола TCP/IP; программная поддержка протокола [IGMP](http://ru.wikipedia.org/wiki/IGMP) для отправки запроса о присоединении к группе и получении группового трафика; поддержка групповой адресации сетевой картой; приложение, использующее групповую адресацию, например видеоконференция. Для расширения этой возможности на глобальную сеть дополнительно необходима поддержка всеми промежуточными маршрутизаторами групповой адресации и пропускание группового трафика используемыми firewall-ами. В локальной сети можно добиться еще большей оптимизации, используя коммутаторы с фильтрацией группового трафика, автоматически настраивающиеся на передачу трафика только получателям.

Технология IP Multicast использует адреса с 224.0.0.0 до 239.255.255.255. Поддерживается статическая и динамическая адресация. Примером статических адресов являются 224.0.0.1 — адрес группы, включающей в себя все узлы локальной сети, 224.0.0.2 — все маршрутизаторы локальной сети. Диапазон адресов с 224.0.0.0 по 224.0.0.255 зарезервирован для протоколов маршрутизации и других низкоуровневых протоколов поддержки групповой адресации. Остальные адреса динамически используются приложениями.

Для определения членства сетевых устройств в различных группах локальной сети маршрутизатор использует протокол IGMP. Один из маршрутизаторов подсети периодически опрашивает узлы подсети, чтобы узнать, какие группы используются приложениями узлов. На каждую группу генерируется только один ответ в подсети. Для того, чтобы стать членом новой группы, узел получателя инициирует запрос на маршрутизатор локальной сети. Сетевой интерфейс узла-получателя настраивается на прием пакетов с этим групповым адресом. Каждый узел самостоятельно отслеживает свои активные групповые адреса, а когда отпадает необходимость состоять в данной группе, прекращает посылать подтверждения на IGMP-запросы. Результаты IGMP-запросов используются протоколами групповой маршрутизации для передачи информации о членстве в группе на соседние маршрутизаторы и далее по сети.

Основная идея групповой маршрутизации состоит в том, что маршрутизаторы, обмениваясь друг с другом информацией, строят пути распространения пакетов ко всем необходимым подсетям без дублирования и петель. Каждый из маршрутизаторов передает принимаемый пакет на один или несколько других маршрутизаторов, избегая тем самым повторной передачи одного и того же пакета по одному каналу и доставляя его всем получателям группы. Поскольку состав группы со временем может меняться, вновь появившиеся и выбывшие члены группы динамически учитываются в построении путей маршрутизации

### Multicast адреса <a id="Multicast-Multicast&#x430;&#x434;&#x440;&#x435;&#x441;&#x430;"></a>

Диапазоны адресов:

| Диапазон | Описание |
| :--- | :--- |
| 224.0.0.0 - 224.0.0.255 | Local Network Control Block |
| 224.0.1.0 - 224.0.1.255 | Internetwork Control Block |
| 224.0.2.0 - 224.0.255.255 | Ad hoc Block |
| 224.1.0.0 - 224.1.255.255 | Не назначен |
| 224.2.0.0 - 224.2.255.255 | SDP/SAP Block |
| 224.3.0.0 - 231.255.255.255 | Не назначен |
| 232.0.0.0 - 232.255.255.255 | Source Specific Multicast Block |
| 233.0.0.0 - 233.255.255.255 | GLOP Block |
| 234.0.0.0 - 238.255.255.255 | Не назначен |
| 239.0.0.0 - 239.255.255.255 | Administratively Scoped Block |

Популярные зарезервированные адреса:

| Адрес | Описание |
| :--- | :--- |
| Адрес | Описание |
| 224.0.0.0 | Base address \(reserved\) |
| 224.0.0.1 | The All Hosts multicast group that contains all systems on the same network segment |
| 224.0.0.2 | The All Routers multicast group that contains all routers on the same network segment |
| 224.0.0.5 | AllSPFRouters address. Используется для отправки Hello-сообщений всем OSPF-маршрутизаторам. |
| 224.0.0.6 | AllDRouters address. Используется для отправки OSPF-сообщений выделенным маршрутизаторам OSPF. |
| 224.0.0.9 | RIP версии 2 |
| 224.0.0.10 | EIGRP-маршрутизаторы |
| 224.0.0.18 | VRRP |
| 224.0.0.22 | IGMP версии 3 |
| 224.0.0.102 | HSRP версии 2 |
| 224.0.0.251 | Multicast DNS address |

Multicast адреса могут [выдаваться](http://tools.ietf.org/html/rfc2908):

* Static
* Scope-relative -- старшие 256 адресов в каждом административном диапазоне адресов зарезервированы для relative assignments.
* Dynamic

